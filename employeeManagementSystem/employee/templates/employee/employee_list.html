{% extends 'employee/base.html' %}

{% block content %}
<div class="p-8">

  <!-- Page Header -->
  <div class="bg-gray-800 text-white p-6 rounded-2xl shadow mb-8">
    <h1 class="text-3xl font-bold">Employee Database</h1>
    <p class="text-gray-300 mt-2">All registered employees in the system.</p>
    <form method="GET" class="mb-4">
    <input 
      type="text"
      name="q"
      placeholder="Search employees..."
      class="bg-gray-800 text-white p-2 rounded-lg w-full"
    >
    </form>
    <a href="{% url 'export_employees_csv' %}"
    class="bg-blue-600 px-4 py-2 text-white rounded-lg">
    Export CSV
    </a>


  </div>

  <!-- Table -->
  <div class="overflow-x-auto rounded-xl shadow border border-gray-700">
    <table class="min-w-full bg-gray-900 text-left">
      
      <!-- Table Header -->
      <thead class="bg-gray-800 text-gray-300 uppercase text-sm">
        <tr>
          <th class="px-6 py-3">Name</th>
          <th class="px-6 py-3">Email</th>
          <th class="px-6 py-3">Department</th>
          <th class="px-6 py-3">Position</th>
          <th class="px-6 py-3">Phone</th>
          <th class="px-6 py-3">Date Joined</th>
          <th class="px-6 py-3">view </th>
          <th class="px-6 py-3">Actions</th>

        </tr>
      </thead>

      <!-- Table Body -->
      <tbody>

        {% for emp in employees %}
        <tr class="border-b border-gray-700 hover:bg-gray-800 transition">

          <td class="px-6 py-4 text-white font-medium">
            {{ emp.full_name }}
          </td>

          <td class="px-6 py-4 text-gray-300">
            {{ emp.email }}
          </td>

          <td class="px-6 py-4 text-gray-300">
            {{ emp.department }}
          </td>

          <td class="px-6 py-4 text-gray-300">
            {{ emp.position }}
          </td>

          <td class="px-6 py-4 text-gray-300">
            {{ emp.phone_number }}
          </td>

          <td class="px-6 py-4 text-gray-400">
            {{ emp.date_joined }}
          </td>

          <td class="px-6 py-4">
            <a href="{% url 'employee_detail' emp.id %}"
              class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm">
              View
            </a>
          </td>
          <td class="px-6 py-4">
            <a href="{% url 'update_employee' emp.id %}" class="text-blue-400">Edit</a>
            <a href="{% url 'delete_employee' emp.id %}" class="text-red-400">Delete</a>
          </td>


        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="px-6 py-6 text-center text-gray-400">
            No employees found.
          </td>
        </tr>
        {% endfor %}

      </tbody>
    </table>
  </div>

</div>
{% endblock %}
